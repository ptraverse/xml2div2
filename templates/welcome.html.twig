{% extends "base.html.twig" %}

{% block title %}
	{{ parent() }}
{% endblock %}

{% block head %}
    {{ parent() }}
    <script type="text/javascript">
    $(document).ready(function () {

		console.log('convert0!');    					
    	
    	$("#convert_button").click( function() {
			
    			var xml_text = $('#xml_textarea').val();
    			
    			$.ajax({
    				type: "GET",
    				url: "/ajax/xml2div2.ajax.php",
    				data: {
    					xml_text: xml_text
    				},
    				success: function(msg){
    					console.log('convert1!');    					
    					$('#response_div').html(msg);    								
    				},
    				error: function(err){
    					console.log('convert2!');
    					console.log("error!");
    				}
    			}).done(function(){
    				console.log('convert3!');
    				console.log("done!");
    			});

    			console.log('convert4!');
    			return false; //to prevent browser submit
    		
    	});

    	
    });
    </script>
{% endblock %}

{% block content %}


<form class="form-horizontal" id="xml_form">
<fieldset>

<!-- Textarea -->
<div class="form-group">
  <label class="col-md-4 control-label" for="xml_textarea">XML</label>
  <div class="col-md-4">                     
    <textarea class="form-control" id="xml_textarea" name="xml_textarea"></textarea>
  </div>
</div>

<!-- Button -->
<div class="form-group">
  <label class="col-md-4 control-label" for="convert_button"></label>
  <div class="col-md-4">
    <button id="convert_button" name="convert_button" class="btn btn-success">Convert</button>
  </div>
</div>

</fieldset>
</form>

<div id="response_div"></div>

{% endblock %}